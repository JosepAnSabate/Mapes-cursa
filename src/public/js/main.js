mapboxgl.accessToken = 'pk.eyJ1Ijoiam9zZXBhbnNhYmF0ZSIsImEiOiJja21kejl5bHUxdzhoMnBwaDg0YjJ1bDRxIn0.fVRAXWvmIKHZ-4igiQQeRg';
const map = new mapboxgl.Map({
    container: 'map', // container ID
    style: 'mapbox://styles/mapbox/streets-v11', // style URL
    center: [1.1, 41.43], // starting position [lng, lat]
    zoom: 12 // starting zoom
});

// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());

// geoometry route
const geojson = {
    "type": "FeatureCollection",
    "name": "rutes",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
    { "type": "Feature", "properties": { "id": 0 }, "geometry": { "type": "MultiLineString", "coordinates": [ [  [
                1.098160743713379, 41.39476315063624],
                [ 1.0985416173934937, 41.395068991668566],
              [1.0986274480819702,41.39534263768819],
              [1.0990619659423828, 41.396022723541726],
              [ 1.0991102457046509, 41.39624002758061],
              [1.0991048812866209, 41.39640099306699],
              [1.0991048812866209,41.39644525850585],
              [ 1.0983753204345703,41.396304413822996],
              [ 1.0981178283691406,41.397720895018885],
              [ 1.0987092554569244, 41.397928133287046],
              [1.098540611565113,41.39796007407786],
              [ 1.0985188186168668, 41.39796434961559
              ],[ 1.098515918880608, 41.397964736995107, 0.0 ], 
              [ 1.097750493699103, 41.398180723329894, 0.0 ], 
              [ 1.097067608370406, 41.398169427880205, 0.0 ], [ 1.095507554075632, 41.398734267104707, 0.0 ], [ 1.095113707328844, 41.399223136687112, 0.0 ], [ 1.094841866622116, 41.399866453806638, 0.0 ], [ 1.092710600464761, 41.400059775477466, 0.0 ], [ 1.091850648607852, 41.400045512725995, 0.0 ], [ 1.090370846518538, 41.400459184915412, 0.0 ], [ 1.089725136670941, 41.400905746908776, 0.0 ], [ 1.089268188777529, 41.400955317587858, 0.0 ], [ 1.088693374758174, 41.401141065801802, 0.0 ], [ 1.087692585208283, 41.402477229546406, 0.0 ], [ 1.08617497172911, 41.402451988272652, 0.0 ], [ 1.083718702320218, 41.402506360044136, 0.0 ], [ 1.083597378461626, 41.403190264145188, 0.0 ], [ 1.08215740078357, 41.403966509409059, 0.0 ], [ 1.080917501801401, 41.404822288702299, 0.0 ], [ 1.07936556952371, 41.405101240214954, 0.0 ], [ 1.079471285930338, 41.405807983873387, 0.0 ], [ 1.07987574936578, 41.406252966449863, 0.0 ], [ 1.077808361585126, 41.407704605314088, 0.0 ], [ 1.076622297047464, 41.408446916072066, 0.0 ], [ 1.077202432951293, 41.409371181814869, 0.0 ], [ 1.077192322009076, 41.409713974989415, 0.0 ], [ 1.077337359175929, 41.409945041016613, 0.0 ], [ 1.07816936183131, 41.410911618690598, 0.0 ], [ 1.077708966864819, 41.411075406064349, 0.0 ], [ 1.077719100432666, 41.41159001860985, 0.0 ], [ 1.077782917117273, 41.412000734336601, 0.0 ], [ 1.077550188061491, 41.412168325651876, 0.0 ], 
              [ 1.078327102229136, 41.412429003638501, 0.0 ], [ 1.078428291414573, 41.412430694243753, 0.0 ], [ 1.078854977793008, 41.412552142767936, 0.0 ], [ 1.079642050541427, 41.413327424694508, 0.0 ], [ 1.079822551650335, 41.414073522717963, 0.0 ], [ 1.079571864187565, 41.414850528466772, 0.0 ], [ 1.076967858134295, 41.416464668540613, 0.0 ], [ 1.076729490698105, 41.416822698056372, 0.0 ], [ 1.076832944672889, 41.417605618706794, 0.0 ], [ 1.07796104665367, 41.418834369250838, 0.0 ], [ 1.078518764872215, 41.418805581319482, 0.0 ], [ 1.078250123812199, 41.421906801258437, 0.0 ], [ 1.077820027972129, 41.422757017765804, 0.0 ], [ 1.077761559952159, 41.423022788417697, 0.0 ], [ 1.078738832262056, 41.425077833308364, 0.0 ], [ 1.077154659748819, 41.427290133862591, 0.0 ], [ 1.077143980098075, 41.427651969961282, 0.0 ], [ 1.076808292433052, 41.427874997862205, 0.0 ], [ 1.076673342570417, 41.428158542141844, 0.0 ], [ 1.076582814402203, 41.429509819431303, 0.0 ], [ 1.07573878538352, 41.429800554926437, 0.0 ], [ 1.074881804530134, 41.430529295370206, 0.0 ], [ 1.074196868990965, 41.431432390776635, 0.0 ], [ 1.074614100539621, 41.431877604504081, 0.0 ], [ 1.073696331495957, 41.432948278856394, 0.0 ], [ 1.073733949440975, 41.434244538769903, 0.0 ], [ 1.072549544276139, 41.435768017974347, 0.0 ], [ 1.072427464717464, 41.436470946601077, 0.0 ], [ 1.070117852823788, 41.437513490766847, 0.0 ], [ 1.070567652400399, 41.438568972918702, 0.0 ], [ 1.070481573793268, 41.438910489212418, 0.0 ], [ 1.069655929214484, 41.439430127625968, 0.0 ], [ 1.069004038112754, 41.440066997736366, 0.0 ], [ 1.068841460245687, 41.440426281506824, 0.0 ], [ 1.069322312788878, 41.440434355144582, 0.0 ], [ 1.069834024631098, 41.441109812073144, 0.0 ], [ 1.070547086920137, 41.441826751759962, 0.0 ], [ 1.0710532588883, 41.441835242999211, 0.0 ], [ 1.071856367454605, 41.442077351126855, 0.0 ], [ 1.072099305213591, 41.442424384358546, 0.0 ], [ 1.072181088187342, 41.44308309595155, 0.0 ], [ 1.072213099617297, 41.443712393083487, 0.0 ], [ 1.073159075156014, 41.4442617405644, 0.0 ], [ 1.073310932633989, 41.444264284843598, 0.0 ], [ 1.073773829439451, 41.44402434562317, 0.0 ], [ 1.074363269919355, 41.443786523497373, 0.0 ], [ 1.07438629085961, 41.444720523091647, 0.0 ], [ 1.074363197754219, 41.445501323630367, 0.0 ], [ 1.074343483407605, 41.446167860583124, 0.0 ], [ 1.074102170012848, 41.446621099791699, 0.0 ], [ 1.074164018026105, 41.447098469079876, 0.0 ], [ 1.074806890901237, 41.44762367335823, 0.0 ], [ 1.075590922702639, 41.449370649929634, 0.0 ], [ 1.075783001480207, 41.449726350774647, 0.0 ], [ 1.075761046956788, 41.450469063446498, 0.0 ], [ 1.077122268841492, 41.451539765833196, 0.0 ], [ 1.078151646321302, 41.451842773513107, 0.0 ], [ 1.079058426007497, 41.452867750761911, 0.0 ], [ 1.07965638684563, 41.453201644360568, 0.0 ], [ 1.080611579154976, 41.454089281146793, 0.0 ], [ 1.080860828086323, 41.45508421411779, 0.0 ], [ 1.080826572737015, 41.456245895242098, 0.0 ], [ 1.081382416094709, 41.45715067661866, 0.0 ], [ 1.081717682066569, 41.456946683299691, 0.0 ], [ 1.082318436907967, 41.456327943510871, 0.0 ], [ 1.083131302654208, 41.456246229512772, 0.0 ], [ 1.08415901472883, 41.455748916101655, 0.0 ], [ 1.084190495366776, 41.455539853944657, 0.0 ], [ 1.084391236040662, 41.454742958165745, 0.0 ], [ 1.085062842914492, 41.4542968638441, 0.0 ], [ 1.086106303193182, 41.454123701619395, 0.0 ], [ 1.087222212086672, 41.453208654721003, 0.0 ], [ 1.08745618686094, 41.453002959498683, 0.0 ], [ 1.088682553174783, 41.453499682528474, 0.0 ], [ 1.08953075211106, 41.453075550075198, 0.0 ], [ 1.090458381755334, 41.451885832998421, 0.0 ], [ 1.090648419582491, 41.45145076137328, 0.0 ], [ 1.091920192459927, 41.451262283158414, 0.0 ], [ 1.092142514785674, 41.451237391747334, 0.0 ], [ 1.092384478461035, 41.451622472819246, 0.0 ], [ 1.092354897974547, 41.452631809740915, 0.0 ], [ 1.09476177521124, 41.454329352736522, 0.0 ], [ 1.095194339433232, 41.454260305150534, 0.0 ], [ 1.095927882461961, 41.454291506563955, 0.0 ], [ 1.096754328451102, 41.454610041174199, 0.0 ], [ 1.09660770904306, 41.455293535019059, 0.0 ], [ 1.09740355126446, 41.456659492483176, 0.0 ], [ 1.100279430709661, 41.457049998018093, 0.0 ], [ 1.100873345019253, 41.456659687583368, 0.0 ], [ 1.102041391481565, 41.455688197301058, 0.0 ], [ 1.102392462216034, 41.455808311141986, 0.0 ], [ 1.102771069444959, 41.455852664801483, 0.0 ], [ 1.103314669117996, 41.456318912428351, 0.0 ], 
              [ 1.103486322563971, 41.456512277000932, 0.0 ], [ 1.104188479805067, 41.456752495079932, 0.0 ], [ 1.104223576630103, 41.457286567564793, 0.0 ], [ 1.104217474281649, 41.457496053835712, 0.0 ], [ 1.104740219432594, 41.457809524097954, 0.0 ], [ 1.105272759980713, 41.458656647199327, 0.0 ], [ 1.106374632969371, 41.458217516590494, 0.0 ], [ 1.107016771129193, 41.458780636096002, 0.0 ], [ 1.108028293080688, 41.458835389447579, 0.0 ], [ 1.109053097991856, 41.458433071805949, 0.0 ], [ 1.111976000087623, 41.458080977355536, 0.0 ], [ 1.112228050475474, 41.458123222020546, 0.0 ], [ 1.112326088774247, 41.458672615483188, 0.0 ], [ 1.1124680406115, 41.459017906028272, 0.0 ], [ 1.113513642192928, 41.459644771270845, 0.0 ], [ 1.114483447879751, 41.458517475130044, 0.0 ], [ 1.115246229303714, 41.458415659309864, 0.0 ], [ 1.117602795154689, 41.458378045295419, 0.0 ], [ 1.117787716516448, 41.458114325022883, 0.0 ], [ 1.118170204333242, 41.458025317967852, 0.0 ], [ 1.118527386686073, 41.457059440528489, 0.0 ], [ 1.119156967301254, 41.456307604478809, 0.0 ], [ 1.120051792117962, 41.456017382364173, 0.0 ], [ 1.119614832799073, 41.455362423351048, 0.0 ], [ 1.119642348208089, 41.455286659750548, 0.0 ], [ 1.12031374088929, 41.455716810295534, 0.0 ], [ 1.120721526042591, 41.455628208127074, 0.0 ], [ 1.121672460201856, 41.455148356382445, 0.0 ], [ 1.122771421643068, 41.454804286862633, 0.0 ], [ 1.124168105716834, 41.454674650823868, 0.0 ], [ 1.125412150705288, 41.453908984471539, 0.0 ], [ 1.126989193057334, 41.452791477331203, 0.0 ], [ 1.127697976410679, 41.452803019249814, 0.0 ], [ 1.128065512876414, 41.452351720966206, 0.0 ], [ 1.128282259260706, 41.451859860504015, 0.0 ], [ 1.128165002554704, 41.451534044158294, 0.0 ], [ 1.127870555394207, 41.451205343258394, 0.0 ], [ 1.127882057434752, 41.450805409034835, 0.0 ], [ 1.128134517231136, 41.449952115379297, 0.0 ], [ 1.128563608429011, 41.449120748938512, 0.0 ], [ 1.128574010434485, 41.448758903415083, 0.0 ], [ 1.129420662545763, 41.447496099253293, 0.0 ], [ 1.129941118966203, 41.447009174808173, 0.0 ], [ 1.130558437972714, 41.446676249904804, 0.0 ], [ 1.130971620671516, 41.446397164437215, 0.0 ], [ 1.131127314950667, 41.446266320742055, 0.0 ], [ 1.131138794997918, 41.445866385430101, 0.0 ], [ 1.130600974570333, 41.446076758606345, 0.0 ], [ 1.130386923791611, 41.446035172100331, 0.0 ], [ 1.130123618532071, 41.44594515080216, 0.0 ], [ 1.130022846460444, 41.445486230131408, 0.0 ], [ 1.129531199179501, 41.445411547765573, 0.0 ], [ 1.129156392424085, 41.444795741556106, 0.0 ], [ 1.129027308369771, 41.444441153228617, 0.0 ], [ 1.128727961515192, 41.444283855400975, 0.0 ], [ 1.128259655830712, 41.443838005650846, 0.0 ], [ 1.128279364275915, 41.443152403072887, 0.0 ], [ 1.128146255830467, 41.442497656705115, 0.0 ], [ 1.127356062933274, 41.441798869025874, 0.0 ], [ 1.125320716827395, 41.440374808592559, 0.0 ], [ 1.124668639775602, 41.439278131685562, 0.0 ], [ 1.124725837499448, 41.439050423154342, 0.0 ], [ 1.124901308611614, 41.438672215538837, 0.0 ], [ 1.124893589678886, 41.438500608760926, 0.0 ], [ 1.124644347645768, 41.438363170680269, 0.0 ], [ 1.124052315232004, 41.437820018887926, 0.0 ], [ 1.123914183758636, 41.437341429697106, 0.0 ], [ 1.123945453766548, 41.436255893710388, 0.0 ], [ 1.12389703372081, 41.436178890078402, 0.0 ], [ 1.12381116625183, 41.435643992900737, 0.0 ], [ 1.123345149876216, 41.435121946538779, 0.0 ], [ 1.12363230271755, 41.434821776732072, 0.0 ], [ 1.123680103089835, 41.434041365275611, 0.0 ], [ 1.124145550568412, 41.432824773787139, 0.0 ], [ 1.124150409429423, 41.43177691308135, 0.0 ], [ 1.123782346681858, 41.431370786655364, 0.0 ], [ 1.123634903424082, 41.431215953576981, 0.0 ], [ 1.123365872767573, 41.430887655293276, 0.0 ], [ 1.123375748338397, 41.430544854201628, 0.0 ], [ 1.123380686059743, 41.43037345364742, 0.0 ], [ 1.123266780736711, 41.429933365435772, 0.0 ], [ 1.122946599047155, 41.429623284904658, 0.0 ], [ 1.122575262540182, 41.429331421901544, 0.0 ], [ 1.122362342532658, 41.428813502554924, 0.0 ], [ 1.122365031867042, 41.427841819842534, 0.0 ], [ 1.122378753735928, 41.427365707229534, 0.0 ], [ 1.12267575334551, 41.426722737644596, 0.0 ], [ 1.122453452808503, 41.425652114534984, 0.0 ], [ 1.122343402711342, 41.425078713780628, 0.0 ], [ 1.12190716502241, 41.424404719500139, 0.0 ], [ 1.121957169438117, 41.42354812963962, 0.0 ], [ 1.121934010904424, 41.422595077577192, 0.0 ], [ 1.121630901150268, 41.421913729121741, 0.0 ], [ 1.12093783330046, 41.421368910590367, 0.0 ], [ 1.120496690155396, 41.42086631195393, 0.0 ], [ 1.121335564965972, 41.419865419268177, 0.0 ], [ 1.121851408249518, 41.418654420644735, 0.0 ], [ 1.122257801356295, 41.417727434985622, 0.0 ], [ 1.122045467164644, 41.417190470374422, 0.0 ], [ 1.122322607130181, 41.416356641233513, 0.0 ], [ 1.123150288382117, 41.415741384871751, 0.0 ], [ 1.123395528551086, 41.415135674362595, 0.0 ], [ 1.12342435361223, 41.414574066281247, 0.0 ], [ 1.123671231155939, 41.41391122123278, 0.0 ], [ 1.123694256407786, 41.413111349476864, 0.0 ], [ 1.123304837824423, 41.412571497891101, 0.0 ], [ 1.123585777446684, 41.411604352332922, 0.0 ], [ 1.124236851220919, 41.410967152534973, 0.0 ], [ 1.125309748746838, 41.41062262775624, 0.0 ], [ 1.126066363694676, 41.409834709339648, 0.0 ], [ 1.126568351389804, 41.409099799290679, 0.0 ], [ 1.12739644602721, 41.408465464232847, 0.0 ], [ 1.12804690401461, 41.407847285721026, 0.0 ], [ 1.128385049782834, 41.407528878455437, 0.0 ], [ 1.128521917540271, 41.407169088333717, 0.0 ], [ 1.128403638365754, 41.406881360766761, 0.0 ], [ 1.127826068826402, 41.405843070330164, 0.0 ], [ 1.128039505239771, 41.40546071001863, 0.0 ], [ 1.128470818053783, 41.404981863463924, 0.0 ], [ 1.128470196913343, 41.404562675446236, 0.0 ], [ 1.128156124186272, 41.404043119101203, 0.0 ], [ 1.12717660737547, 41.402903015519549, 0.0 ], [ 1.126053297101735, 41.401484284544409, 0.0 ], [ 1.125442852337645, 41.400712195756697, 0.0 ], [ 1.125451064178825, 41.400426526339324, 0.0 ], [ 1.124395865594965, 41.400161628829132, 0.0 ], [ 1.123076703331, 41.399397022436069, 0.0 ], [ 1.122624720799565, 41.399275325005412, 0.0 ], [ 1.120908101165612, 41.399132973150067, 0.0 ], [ 1.120760186163676, 41.398997181823361, 0.0 ], [ 1.118909401676346, 41.398242894650572, 0.0 ], [ 1.118299079719637, 41.397909001693364, 0.0 ], [ 1.11780285339976, 41.397567445771038, 0.0 ], [ 1.117395978810223, 41.397198769827831, 0.0 ], [ 1.11630100449163, 41.396999834673188, 0.0 ], [ 1.115574143703151, 41.396759286502629, 0.0 ], [ 1.115188450717256, 41.396533851397173, 0.0 ], [ 1.115237595570352, 41.396365556436201, 0.0 ], [ 1.115097050268484, 41.396303711103393, 0.0 ], [ 1.114624794462255, 41.396228093132294, 0.0 ], [ 1.113737123312296, 41.396080165190796, 0.0 ], [ 1.111683589167725, 41.395779722211564, 0.0 ], [ 1.110900385618864, 41.395738281836685, 0.0 ], [ 1.110586313260253, 41.395661672539369, 0.0 ], [ 1.110273397140095, 41.395708929413004, 0.0 ], [ 1.109736760851909, 41.395890647358257, 0.0 ], [ 1.108936992079146, 41.396420527578606, 0.0 ], [ 1.108628937300906, 41.396572654329248, 0.0 ], [ 1.108323643002599, 41.396629557954384, 0.0 ], [ 1.107979858278932, 41.396704881191468, 0.0 ], [ 1.107907958154096, 41.396784676036503, 0.0 ], [ 1.10771688929124, 41.396829166763609, 0.0 ], [ 1.107611716296413, 41.396965574649919, 0.0 ], [ 1.10748964638438, 41.397030253674501, 0.0 ], [ 1.107254817547004, 41.397165718771802, 0.0 ], [ 1.106946755426913, 41.397317840839435, 0.0 ], [ 1.106606938774404, 41.397474202756655, 0.0 ], [ 1.105985037330437, 41.397759293880313, 0.0 ], [ 1.105748597039035, 41.397841141268522, 0.0 ], [ 1.10559504689985, 41.397900536445874, 0.0 ], [ 1.105231868527612, 41.397989822141696, 0.0 ], [ 1.105155715588762, 41.397998094436716, 0.0 ], [ 1.105130008491684, 41.398011961098376, 0.0 ], [ 1.104536985724672, 41.398173672109877, 0.0 ], [ 1.10411745072211, 41.398242972037679, 0.0 ], [ 1.103703684171007, 41.398331419054067, 0.0 ], [ 1.103312716334512, 41.398505981377497, 0.0 ], [ 1.103185839584403, 41.398518179325741, 0.0 ], [ 1.102941790248571, 41.398480810894384, 0.0 ], [ 1.102822978409736, 41.398541966109633, 0.0 ], [ 1.102665362179216, 41.398632252256824, 0.0 ], [ 1.102437108065581, 41.398649922176055, 0.0 ], [ 1.102214669918332, 41.398630771398004, 0.0 ], [ 1.102178312242796, 41.398630171527195, 0.0 ], [ 1.102232994168055, 41.398408683383373, 0.0 ], [ 1.102400164257282, 41.398316173749585, 0.0 ], [ 1.102297357999095, 41.398262080480251, 0.0 ], [ 1.101704612188025, 41.398087963042002, 0.0 ], [ 1.101096339395433, 41.39790405946632, 0.0 ], [ 1.100610189607683, 41.397762658088261, 0.0 ], [ 1.100216768356608, 41.397641244331474, 0.0 ], [ 1.100019397961988, 41.397576060382242, 0.0 ], [ 1.099775715578741, 41.397472003978137, 0.0 ], [ 1.099449865424412, 41.397257031675728, 0.0 ], [ 1.099335805032446, 41.397155116007383, 0.0 ], [ 1.099253637064071, 41.397044200479399, 0.0 ], [ 1.099160037765501, 41.396891416401132, 0.0 ], [ 1.099108335524245, 41.39671193519726, 0.0 ], [ 1.099095195159669, 41.396511656030242, 0.0 ], [ 1.099024372956615, 41.396011521397369, 0.0 ], [ 1.098934318624557, 41.395845696406795, 0.0 ], [ 1.098758313456685, 41.395590328143598, 0.0 ], [ 1.098685910076249, 41.395470046830049, 0.0 ], [ 1.098614825526409, 41.395304535141541, 0.0 ], [ 1.098474222557551, 41.395028316410176, 0.0 ], [ 1.098423579278343, 41.39500247144457, 0.0 ], [ 1.098345864164294, 41.394955934523558, 0.0 ], [ 1.098314944730075, 41.394931606436451, 0.0 ], [ 1.098278049668373, 41.394895271090867, 0.0 ], [ 1.098253036520237, 41.394885330781989, 0.0 ], [ 1.098235942530442, 41.394820742502866, 0.0 ], [ 1.098140092682782, 41.39474532532067, 0.0 ] ] ] } }
    ]
};
    
     
 map.on('load', () => {
// 'line-gradient' can only be used with GeoJSON sources
// and the source must have the 'lineMetrics' option set to true
map.addSource('line', {
    type: 'geojson',
    lineMetrics: true,
    data: geojson
});
    
// the layer must be of type 'line'
map.addLayer({
    type: 'line',
    source: 'line',
    id: 'line',
    paint: {
        'line-color': 'red',
        'line-width': 9,
        // 'line-gradient' must be specified using an expression
        // with the special 'line-progress' property
        'line-gradient': [
        'interpolate',
        ['linear'],
        ['line-progress'],
        0,
        'blue',
        0.1,
        'royalblue',
        0.3,
        'cyan',
        0.5,
        'lime',
        0.7,
        'yellow',
        1,
        'red'
        ]
    },
layout: {
    'line-cap': 'round',
    'line-join': 'round'
}
});
});

// lim administratius espluga
map.on('load', () => {
    // Add a data source containing GeoJSON data.
    map.addSource('maine', {
    'type': 'geojson',
    'data': {
    'type': 'Feature',
    'geometry': {
    'type': 'Polygon',
    // These coordinates outline Maine.
    'coordinates': [
    [
    [ 1.148500479293493, 41.418524264759455 ], [ 1.147382592963123, 41.418324336946789 ], [ 1.146947773748023, 41.418265097230794 ], [ 1.146563492968427, 41.41819171813097 ], [ 1.146112458960752, 41.418012691873074 ], [ 1.145894853572351, 41.417863814588742 ], [ 1.145071330556837, 41.417264643734832 ], [ 1.144636784145601, 41.417019586224967 ], [ 1.14407304988918, 41.416907818662253 ], [ 1.142404309913029, 41.416914135435498 ], [ 1.141289552401771, 41.416849483471168 ], [ 1.140395863348104, 41.416648244313514 ], [ 1.139817817747456, 41.416241697357016 ], [ 1.138859493135976, 41.415320917066026 ], [ 1.138346204095823, 41.414822007665997 ], [ 1.137734113640596, 41.41453180988853 ], [ 1.135756501943489, 41.41426615679412 ], [ 1.134960466616994, 41.413902890868833 ], [ 1.134382168141866, 41.413519730676143 ], [ 1.133840623287898, 41.41292703125049 ], [ 1.133354595839006, 41.412568599772058 ], [ 1.132562609595079, 41.412065144713566 ], [ 1.132232912042507, 41.411662768781213 ], [ 1.13230756749418, 41.411220117452864 ], [ 1.132721945794407, 41.410829633656512 ], [ 1.133163517513745, 41.410579827663227 ], [ 1.133856208749808, 41.410217271235396 ], [ 1.134929720544439, 41.409557257069167 ], [ 1.135216722804793, 41.409281610434896 ], [ 1.135448337045575, 41.408771425326293 ], [ 1.135639751519553, 41.408587541277221 ], [ 1.136400596167383, 41.408015850569811 ], [ 1.137035848694192, 41.407488868266753 ], [ 1.137355804887584, 41.407143675266823 ], [ 1.137523786418749, 41.40669082111021 ], [ 1.137541124853082, 41.406083761985116 ], [ 1.137373735888243, 41.405426967639229 ], [ 1.13097676361639, 41.397053439986635 ], [ 1.130517856439975, 41.393582715788924 ], [ 1.130552318604755, 41.392380033112822 ], [ 1.129696025703967, 41.39088276432728 ], [ 1.12734720946324, 41.385340042320081 ], [ 1.125914311865949, 41.382338102977378 ], [ 1.125250940502639, 41.381147562253908 ], [ 1.124944796410054, 41.379927799158338 ], [ 1.12509689841735, 41.378008807596139 ], [ 1.125132224729928, 41.377320075086203 ], [ 1.125077667539506, 41.376513327757472 ], [ 1.124944563474979, 41.375751867420128 ], [ 1.124470339147685, 41.374993587113408 ], [ 1.123781581916323, 41.374152997390262 ], [ 1.123023211765172, 41.373579948436856 ], [ 1.122950342450519, 41.373415282812623 ], [ 1.123096869086733, 41.373172320113369 ], [ 1.123926903580121, 41.372333152841428 ], [ 1.124851237816407, 41.371448858718814 ], [ 1.12501340909384, 41.371206148200848 ], [ 1.125083293540817, 41.370921042650728 ], [ 1.124514356942363, 41.370222647843413 ], [ 1.124138557426851, 41.369519200758788 ], [ 1.123525387438377, 41.369050210226483 ], [ 1.122802490452782, 41.368314170235685 ], [ 1.121958605001298, 41.367482749331458 ], [ 1.121561890339901, 41.367254344220882 ], [ 1.12025503869023, 41.3668942609496 ], [ 1.119367139495251, 41.366517678608027 ], [ 1.119032582076445, 41.366290280118911 ], [ 1.118680710220643, 41.366132762564838 ], [ 1.117858300421454, 41.365903062661737 ], [ 1.11494777764971, 41.365259722497647 ], [ 1.114012866732363, 41.364894128688348 ], [ 1.113143581817639, 41.364400982422275 ], [ 1.112367303440712, 41.363920973560909 ], [ 1.109828270320815, 41.363029416206551 ], [ 1.108574696255771, 41.362436523587348 ], [ 1.107759384943854, 41.36222461247845 ], [ 1.106619053918295, 41.362007261324869 ], [ 1.106006580847247, 41.361751836664197 ], [ 1.105337049341465, 41.361320463355618 ], [ 1.104279598858776, 41.360917467115996 ], [ 1.103885036253015, 41.360630761643904 ], [ 1.103228455051732, 41.359993058374144 ], [ 1.10271174373573, 41.359759189440588 ], [ 1.101747922901388, 41.359480208491334 ], [ 1.100803499393726, 41.359389606122512 ], [ 1.097836219225461, 41.359434387306685 ], [ 1.096099867911393, 41.361716349118552 ], [ 1.095965620398318, 41.362052342542924 ], [ 1.095507851086709, 41.362364070168255 ], [ 1.094948832108993, 41.363187610413995 ], [ 1.09499258591791, 41.363322989162207 ], [ 1.095257290840643, 41.363494808867387 ], [ 1.095425803371027, 41.363710071871097 ], [ 1.095763462581781, 41.364098454824195 ], [ 1.095899292564166, 41.364339927424119 ], [ 1.095920569396575, 41.364705063205754 ], [ 1.095430072886589, 41.365199541616569 ], [ 1.095374720842999, 41.365461810757225 ], [ 1.095445580569174, 41.365750126347713 ], [ 1.095802721798672, 41.366569636593326 ], [ 1.096051198690845, 41.366753165444244 ], [ 1.09689909667145, 41.367078285859044 ], [ 1.097211618071628, 41.367251071654003 ], [ 1.097442936863334, 41.367482051108276 ], [ 1.097637476010149, 41.367892112199343 ], [ 1.09776471860668, 41.36842067415261 ], [ 1.097782464965387, 41.36891148894064 ], [ 1.097710936544665, 41.369322918068669 ], [ 1.097561957822279, 41.369524014766853 ], [ 1.097128296576624, 41.369696177595749 ], [ 1.096583491249871, 41.369878750847242 ], [ 1.095052047075986, 41.370666844242265 ], [ 1.094306839974326, 41.371180970754892 ], [ 1.093832755891789, 41.371651754359668 ], [ 1.093331766678861, 41.371954470133318 ], [ 1.092897149247492, 41.372162625381556 ], [ 1.092647782655249, 41.372541379372535 ], [ 1.092361849906971, 41.373087056642198 ], [ 1.092144858914207, 41.373454276830351 ], [ 1.090537300437338, 41.374677780845929 ], [ 1.089551866223115, 41.375798195149393 ], [ 1.089251194549071, 41.376016665788995 ], [ 1.088671628855554, 41.376309944703159 ], [ 1.088546108961859, 41.376529251261594 ], [ 1.088449404627425, 41.376850725267069 ], [ 1.088371672790324, 41.377083705515382 ], [ 1.0882724134251, 41.377329027865308 ], [ 1.088111477500091, 41.377573415346781 ], [ 1.087785347451738, 41.377876755101738 ], [ 1.087439985011471, 41.378118076377994 ], [ 1.087054435960034, 41.378343236451215 ], [ 1.086803494096056, 41.37851668172511 ], [ 1.086654187588493, 41.378714874487763 ], [ 1.08651336379085, 41.37898265193725 ], [ 1.086353441826793, 41.379196159745142 ], [ 1.086132297966105, 41.379393156962841 ], [ 1.085861484391224, 41.379550777556645 ], [ 1.085597544192516, 41.379816505536688 ], [ 1.085521196055053, 41.379977360787194 ], [ 1.085356232682529, 41.381247301650475 ], [ 1.085143322671505, 41.381501628151234 ], [ 1.085058842431764, 41.382824157340394 ], [ 1.0847791963456, 41.383017295796847 ], [ 1.084308472490604, 41.386619903141231 ], [ 1.083838069199821, 41.387093492078598 ], [ 1.083711540958201, 41.388294895441369 ], [ 1.083220162810113, 41.389490220569655 ], [ 1.082714515735841, 41.390393029760332 ], [ 1.082589241233119, 41.39076923446374 ], [ 1.082209742817112, 41.391261534708121 ], [ 1.081810320885139, 41.391650191680846 ], [ 1.081246536119341, 41.39194594661793 ], [ 1.080377378537188, 41.392262454158036 ], [ 1.076126887529939, 41.397715876352827 ], [ 1.075556099693881, 41.399321007440193 ], [ 1.074742190729481, 41.403038520699788 ], [ 1.073385569125874, 41.405689434846828 ], [ 1.071908652610681, 41.40855304212468 ], [ 1.071084499920677, 41.40862515491299 ], [ 1.070886007152566, 41.412249552658444 ], [ 1.071644727642767, 41.415933047181369 ], [ 1.071879324668523, 41.418030099248618 ], [ 1.070552336844483, 41.418128188075528 ], [ 1.071140484197441, 41.419857471509907 ], [ 1.071205299309249, 41.420752585543774 ], [ 1.071271133196402, 41.421613310032647 ], [ 1.071539552043608, 41.422587404293111 ], [ 1.072299111806448, 41.424248218140498 ], [ 1.072152859516758, 41.424321786329685 ], [ 1.072091044133882, 41.424380736748034 ], [ 1.071800640728835, 41.42484918446759 ], [ 1.071658581473203, 41.425088369479198 ], [ 1.071495826651119, 41.4253232444172 ], [ 1.071181955264049, 41.426264971079611 ], [ 1.07110302080899, 41.426384700909566 ], [ 1.071026115135446, 41.426452044430299 ], [ 1.07085895705499, 41.426556514520712 ], [ 1.070539486482308, 41.426736880766143 ], [ 1.070343882039276, 41.426860328063192 ], [ 1.070245347856443, 41.42701143297262 ], [ 1.070187379692528, 41.427069636257173 ], [ 1.069869760780227, 41.427272188716415 ], [ 1.069519596132189, 41.427518958674284 ], [ 1.069256202186601, 41.427777451410549 ], [ 1.06893238784634, 41.428120225100393 ], [ 1.068616298413292, 41.428278936081135 ], [ 1.068413237616998, 41.428476021595451 ], [ 1.068244704745654, 41.428666931213414 ], [ 1.068100286060332, 41.428871935951079 ], [ 1.06800347791096, 41.42905738425533 ], [ 1.06791155908741, 41.429340279332813 ], [ 1.067931541825631, 41.429526067250798 ], [ 1.06623602206545, 41.43490119365002 ], [ 1.06594934934934, 41.434994911401695 ], [ 1.06563882563245, 41.435170370520034 ], [ 1.064870467182694, 41.435826665210051 ], [ 1.064230371679508, 41.436274350836364 ], [ 1.062898727817316, 41.437087873175543 ], [ 1.062284566977995, 41.437266317730383 ], [ 1.060032878584988, 41.438307046793589 ], [ 1.059519868577474, 41.43868938691439 ], [ 1.058359019615094, 41.439182208649008 ], [ 1.057124355689369, 41.439757536680823 ], [ 1.055420588347694, 41.441952923663564 ], [ 1.05552722581299, 41.442009487610051 ], [ 1.055593217591979, 41.442296932208443 ], [ 1.055629671516219, 41.442427067455917 ], [ 1.055723780868293, 41.442666800106224 ], [ 1.055756399635759, 41.442845237581864 ], [ 1.055803027535593, 41.442979417623107 ], [ 1.056044755809125, 41.443242269728216 ], [ 1.056277745219669, 41.443336724367313 ], [ 1.057076698398547, 41.443578896713056 ], [ 1.05801579447256, 41.443934571390862 ], [ 1.058267226691771, 41.443992764348451 ], [ 1.058517453510462, 41.444095429568797 ], [ 1.058658442528483, 41.444180399657292 ], [ 1.05866703127096, 41.444313933921322 ], [ 1.058728693209976, 41.44465479728472 ], [ 1.058731297043182, 41.444848575524688 ], [ 1.058703808765192, 41.445064002624733 ], [ 1.058521961752456, 41.445502353569687 ], [ 1.058418668741384, 41.445658588499782 ], [ 1.05834364383732, 41.445870421344871 ], [ 1.058436897307862, 41.44626783953214 ], [ 1.058805052615091, 41.446815984011096 ], [ 1.059155606522639, 41.447135510439637 ], [ 1.059513706878258, 41.447342489162942 ], [ 1.05992090221025, 41.447528948595888 ], [ 1.060423925138244, 41.44768126516886 ], [ 1.060587684562361, 41.447709424104772 ], [ 1.060858890812844, 41.447815680257442 ], [ 1.061114554189767, 41.447877090696409 ], [ 1.061630820336597, 41.447974774295723 ], [ 1.061859349865739, 41.448067069368292 ], [ 1.062175417172063, 41.448114093316846 ], [ 1.062556700019124, 41.448206257206472 ], [ 1.062627260044859, 41.448248785943974 ], [ 1.062637747773435, 41.448318764494111 ], [ 1.062478264563154, 41.448573310934442 ], [ 1.062358500879397, 41.448768271078833 ], [ 1.062359761175848, 41.448866735600802 ], [ 1.062381634397042, 41.448984551351927 ], [ 1.062505296936799, 41.449085076804479 ], [ 1.06269251289062, 41.449173972623186 ], [ 1.062878903791295, 41.449294647922514 ], [ 1.062927809845482, 41.449381034886329 ], [ 1.062948702467203, 41.449463437666004 ], [ 1.062885312394479, 41.449763374706308 ], [ 1.062884568964582, 41.449872883729597 ], [ 1.062919508026558, 41.450010283728197 ], [ 1.062995270379541, 41.45017178832002 ], [ 1.063113910135404, 41.450417146451485 ], [ 1.063258825865025, 41.450640429933877 ], [ 1.063398765929095, 41.450753297365488 ], [ 1.063558076755694, 41.450814611979297 ], [ 1.063637148208374, 41.450860886009792 ], [ 1.063722246147145, 41.450942027270059 ], [ 1.063773175423331, 41.451000707259247 ], [ 1.06375181809558, 41.451111040295871 ], [ 1.063694586338915, 41.451203927147446 ], [ 1.063556185343473, 41.451313011161616 ], [ 1.063439650537908, 41.451387246779923 ], [ 1.063317313371428, 41.451632421920614 ], [ 1.063265288507792, 41.451964794339155 ], [ 1.063285558990326, 41.452156708063676 ], [ 1.063402645887672, 41.452502734643126 ], [ 1.063452909723273, 41.452648228173423 ], [ 1.063597511923934, 41.453232494504363 ], [ 1.063607059157285, 41.453386489616825 ], [ 1.063665700672107, 41.453556261975102 ], [ 1.063753115729989, 41.453676351136501 ], [ 1.064100818849602, 41.454117945376332 ], [ 1.064230791708002, 41.45433683309767 ], [ 1.06437447819851, 41.454501190612049 ], [ 1.064442153650605, 41.454568528209691 ], [ 1.064642147029275, 41.45471149586875 ], [ 1.065021018761811, 41.45488620261451 ], [ 1.065182088992821, 41.454973303750968 ], [ 1.065247233615859, 41.455029159814437 ], [ 1.06547060363213, 41.455267900032332 ], [ 1.065592239752455, 41.455356589315706 ], [ 1.065733078421709, 41.455411465861729 ], [ 1.065942180965741, 41.455417232214941 ], [ 1.066260769023754, 41.455408896253232 ], [ 1.066523828099813, 41.455436103536428 ], [ 1.067128899748975, 41.455585422142434 ], [ 1.067708381545646, 41.455624876451083 ], [ 1.067945783261143, 41.455596888897389 ], [ 1.068221742187407, 41.455492000442717 ], [ 1.068469452622654, 41.45531827628821 ], [ 1.068711451004561, 41.455135268883431 ], [ 1.068801567243922, 41.45495880885472 ], [ 1.068873222148188, 41.454791225769753 ], [ 1.068873865807339, 41.454567690194487 ], [ 1.068805982104698, 41.454402268683779 ], [ 1.068805690910972, 41.454303099988479 ], [ 1.068868081222424, 41.454197597727571 ], [ 1.068939621338896, 41.45411458560212 ], [ 1.06907941652164, 41.45406739458673 ], [ 1.069291120341481, 41.454033749106749 ], [ 1.069596400065364, 41.453957179939842 ], [ 1.069815565191561, 41.453893936529553 ], [ 1.070018641155387, 41.453763593099197 ], [ 1.070162951636253, 41.453673064162359 ], [ 1.070281830660163, 41.453604445199836 ], [ 1.070394517585563, 41.453579134603139 ], [ 1.070479753336732, 41.453595424919406 ], [ 1.070554057494145, 41.453641254011437 ], [ 1.070616642499018, 41.45375128451348 ], [ 1.070658897053229, 41.453880788868943 ], [ 1.07067839579013, 41.454002526183416 ], [ 1.070661565562226, 41.454126086206308 ], [ 1.070660023812188, 41.454178119114658 ], [ 1.070923954829336, 41.454660709950417 ], [ 1.071004525295886, 41.45483048599322 ], [ 1.071039466445896, 41.454984636035519 ], [ 1.071034623258784, 41.455148116602565 ], [ 1.071044852431351, 41.455247361822899 ], [ 1.071095010250715, 41.455332415295494 ], [ 1.071200251586851, 41.455433253115778 ], [ 1.071280648394819, 41.455536196299583 ], [ 1.071353558034485, 41.455758532899729 ], [ 1.071419365496135, 41.455816468142743 ], [ 1.071537843530585, 41.455842321521516 ], [ 1.071649541325421, 41.455826270050409 ], [ 1.071744969270108, 41.455821924753558 ], [ 1.071843935241085, 41.455835562002349 ], [ 1.071924922997903, 41.45591455680696 ], [ 1.072004436522109, 41.456047386943702 ], [ 1.072069536624688, 41.456266710096429 ], [ 1.072110953986531, 41.456376114917646 ], [ 1.072163174305703, 41.456432020757532 ], [ 1.072226200156884, 41.456511164758901 ], [ 1.072211972255812, 41.456603515309943 ], [ 1.072209146847218, 41.456698939029835 ], [ 1.072221723854668, 41.456791738640348 ], [ 1.072292749855848, 41.456859488049297 ], [ 1.072425318382557, 41.45693115048671 ], [ 1.072515525610963, 41.457002103210456 ], [ 1.072616623987641, 41.457093413300569 ], [ 1.072820390847045, 41.457227063047121 ], [ 1.072966447697296, 41.457356773794828 ], [ 1.073097134306579, 41.457492081334678 ], [ 1.07318725778648, 41.457565914275889 ], [ 1.073282065979109, 41.457610914071026 ], [ 1.073464367719578, 41.457689172318219 ], [ 1.073580783204156, 41.457780828072309 ], [ 1.073730022075775, 41.457936620495353 ], [ 1.073896525570667, 41.458095673921669 ], [ 1.07410146210769, 41.458185928680614 ], [ 1.074208137931217, 41.458222389839008 ], [ 1.074354252416501, 41.458224835087528 ], [ 1.074517737150518, 41.458158129130375 ], [ 1.074663561467666, 41.458166333419257 ], [ 1.074815452556322, 41.458232552124485 ], [ 1.074933682500475, 41.458396560697942 ], [ 1.075031122865462, 41.458745399175228 ], [ 1.075047431582624, 41.458971289891394 ], [ 1.075072200326691, 41.459174264963593 ], [ 1.075149795985359, 41.459412799511043 ], [ 1.075356190834133, 41.459717165736819 ], [ 1.07549984890929, 41.459972926969776 ], [ 1.076275869192887, 41.459955100134039 ], [ 1.076734462627423, 41.459966368638611 ], [ 1.077322227496008, 41.460071481922348 ], [ 1.07784644700229, 41.460418891848093 ], [ 1.07821468077859, 41.460806205995574 ], [ 1.078661306843065, 41.462359034114911 ], [ 1.078835810080526, 41.462637282556479 ], [ 1.079454565181827, 41.463113348025203 ], [ 1.080508069217403, 41.463638994718956 ], [ 1.081456190314833, 41.463930051583468 ], [ 1.081888203392447, 41.464064158220701 ], [ 1.082331529144562, 41.464293922799349 ], [ 1.083668019101229, 41.46429493263237 ], [ 1.087422903228938, 41.463605975664969 ], [ 1.087721260755809, 41.463505015491762 ], [ 1.088214000310351, 41.463492037336536 ], [ 1.088594626417362, 41.463455938973752 ], [ 1.089065020193318, 41.463241556275442 ], [ 1.089422844018618, 41.463035840441989 ], [ 1.089866905838873, 41.462767877621239 ], [ 1.090406922975465, 41.462575720772492 ], [ 1.090817956859699, 41.462466084467472 ], [ 1.091222225281248, 41.462472791217373 ], [ 1.091501413457751, 41.46255154729964 ], [ 1.091903210440003, 41.462748792654764 ], [ 1.092122743217594, 41.462942924696833 ], [ 1.092754291816378, 41.463472090654406 ], [ 1.09453657503759, 41.464094354000011 ], [ 1.096318818886719, 41.46424031616106 ], [ 1.099328077613336, 41.464512358274966 ], [ 1.100108864756251, 41.464747541287501 ], [ 1.1008664674035, 41.464813099937743 ], [ 1.101399191995611, 41.46487476244819 ], [ 1.101663360094319, 41.464984950906477 ], [ 1.102217542400362, 41.465279967885444 ], [ 1.104656446765435, 41.466061159517302 ], [ 1.105354061561132, 41.466263053365026 ], [ 1.105912157992359, 41.466420404410712 ], [ 1.106377562792477, 41.466862191080814 ], [ 1.106811946803115, 41.467242669949172 ], [ 1.107219430345217, 41.467543625452961 ], [ 1.110677682616267, 41.467894724628259 ], [ 1.111044748826059, 41.467843739854651 ], [ 1.111680659200942, 41.46766431763659 ], [ 1.111815314545527, 41.468236024907341 ], [ 1.112041333390405, 41.468704753177427 ], [ 1.112221521658763, 41.469011417994324 ], [ 1.112631796211933, 41.469217379464922 ], [ 1.115712339719014, 41.46955258438247 ], [ 1.11581135458827, 41.469611128965084 ], [ 1.116071108486467, 41.470222889379201 ], [ 1.116169267147209, 41.470319338116525 ], [ 1.116627025264455, 41.470184526846268 ], [ 1.117007147285714, 41.470133736956278 ], [ 1.117625712095581, 41.470115399321244 ], [ 1.118376300976282, 41.470326999129213 ], [ 1.119284494995688, 41.470322846898668 ], [ 1.119483558962503, 41.470421032668874 ], [ 1.119798988389173, 41.47084374268276 ], [ 1.120192621038518, 41.471191802812029 ], [ 1.129318373909848, 41.474209325586379 ], [ 1.131774272879641, 41.45838113508195 ], [ 1.136052552484924, 41.449105929205359 ], [ 1.137024766396772, 41.44689851203529 ], [ 1.138377350100803, 41.440422474689036 ], [ 1.139735101681114, 41.439494829270323 ], [ 1.144538337461979, 41.430312431372293 ], [ 1.145894557641783, 41.42777523543041 ], [ 1.148500479293493, 41.418524264759455 ]
    ]
    ]
    }
    }
    });
     
    // Add a new layer to visualize the polygon.
    map.addLayer({
    'id': 'maine',
    'type': 'fill',
    'source': 'maine', // reference the data source
    'layout': {},
    'paint': {
    'fill-color': '#0080ff', // blue color fill
    'fill-opacity': 0
    }
    });
    // Add a black outline around the polygon.
    map.addLayer({
    'id': 'outline',
    'type': 'line',
    'source': 'maine',
    'layout': {},
    'paint': {
    'line-color': '#000',
    'line-width': 3
    }
    });
    });

// Add geolocate control to the map.
map.addControl(
    new mapboxgl.GeolocateControl({
    positionOptions: {
    enableHighAccuracy: true
    },
    // When active the map will receive updates to the device's location as it changes.
    trackUserLocation: true,
    // Draw an arrow next to the location dot to indicate which direction the device is heading.
    showUserHeading: true
    })
);

// legend


const layers = [
    '0-10',
    '10-20',
    '20-50',
    '50-100'
  ];
  const colors = [
    '#FFEDA0',
    '#FED976',
    '#FEB24C',
    '#FD8D3C'
  ];

  // create legend
const legend = document.getElementById('legend');

layers.forEach((layer, i) => {
  const color = colors[i];
  const item = document.createElement('div');
  const key = document.createElement('span');
  key.className = 'legend-key';
  key.style.backgroundColor = color;

  const value = document.createElement('span');
  value.innerHTML = `${layer}`;
  item.appendChild(key);
  item.appendChild(value);
  legend.appendChild(item);
});
